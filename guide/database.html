<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Database | Intake24</title>
    <meta name="description" content="Intake24 documentation">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.CNijH4Ev.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.BJjde2M_.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DfNjWCHO.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DKk_ut7L.js">
    <link rel="modulepreload" href="/assets/guide_database.md.CCozPLNc.lean.js">
    <meta name="theme-color" content="#EE672D">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="icon" href="/icons/icon.ico" sizes="any">
    <link rel="icon" href="/icons/icon.svg" type="image/svg+xml">
    <link rel="mask-icon" href="/icons/icon.svg" type="image/svg+xml" color="#FFFFFF">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-2d86940d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d634d5dc></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-d634d5dc>Skip to content</a><!--]--><!----><header class="VPNav" data-v-2d86940d data-v-0c02c417><div class="VPNavBar" data-v-0c02c417 data-v-0865600b><div class="wrapper" data-v-0865600b><div class="container" data-v-0865600b><div class="title" data-v-0865600b><div class="VPNavBarTitle has-sidebar" data-v-0865600b data-v-47419d43><a class="title" href="/" data-v-47419d43><!--[--><!--]--><!--[--><img class="VPImage logo" src="/icons/pwa-512x512.png" alt data-v-e4bb108a><!--]--><span data-v-47419d43>Intake24</span><!--[--><!--]--></a></div></div><div class="content" data-v-0865600b><div class="content-body" data-v-0865600b><!--[--><!--]--><div class="VPNavBarSearch search" data-v-0865600b><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-0865600b data-v-32b7cdec><span id="main-nav-aria-label" class="visually-hidden" data-v-32b7cdec> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/" tabindex="0" data-v-32b7cdec data-v-6f6ea33f><!--[--><span data-v-6f6ea33f>Guide</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-32b7cdec data-v-e9690117><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e9690117><span class="text" data-v-e9690117><!----><span data-v-e9690117>Components</span><span class="vpi-chevron-down text-icon" data-v-e9690117></span></span></button><div class="menu" data-v-e9690117><div class="VPMenu" data-v-e9690117 data-v-e9d0de9d><div class="items" data-v-e9d0de9d><!--[--><!--[--><div class="VPMenuLink" data-v-e9d0de9d data-v-11b21cb7><a class="VPLink link" href="/config/" data-v-11b21cb7><!--[--><span data-v-11b21cb7>Configuration</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9d0de9d data-v-11b21cb7><a class="VPLink link" href="/api/" data-v-11b21cb7><!--[--><span data-v-11b21cb7>API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9d0de9d data-v-11b21cb7><a class="VPLink link" href="/admin/" data-v-11b21cb7><!--[--><span data-v-11b21cb7>Admin Tool</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9d0de9d data-v-11b21cb7><a class="VPLink link" href="/survey/" data-v-11b21cb7><!--[--><span data-v-11b21cb7>Survey App</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9d0de9d data-v-11b21cb7><a class="VPLink link" href="/cli/" data-v-11b21cb7><!--[--><span data-v-11b21cb7>CLI</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-32b7cdec data-v-e9690117><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e9690117><span class="text" data-v-e9690117><!----><span data-v-e9690117>Resources</span><span class="vpi-chevron-down text-icon" data-v-e9690117></span></span></button><div class="menu" data-v-e9690117><div class="VPMenu" data-v-e9690117 data-v-e9d0de9d><div class="items" data-v-e9d0de9d><!--[--><!--[--><div class="VPMenuLink" data-v-e9d0de9d data-v-11b21cb7><a class="VPLink link vp-external-link-icon" href="https://intake24.org" target="_blank" rel="noreferrer" data-v-11b21cb7><!--[--><span data-v-11b21cb7>Home</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9d0de9d data-v-11b21cb7><a class="VPLink link vp-external-link-icon" href="https://intake24.atlassian.net/wiki/spaces/resources" target="_blank" rel="noreferrer" data-v-11b21cb7><!--[--><span data-v-11b21cb7>Researcher guides</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9d0de9d data-v-11b21cb7><a class="VPLink link vp-external-link-icon" href="https://github.com/intake24/intake24" target="_blank" rel="noreferrer" data-v-11b21cb7><!--[--><span data-v-11b21cb7>GitHub</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-0865600b data-v-6b0abb3e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6b0abb3e data-v-fbf9a97f data-v-aa5e67d3><span class="check" data-v-aa5e67d3><span class="icon" data-v-aa5e67d3><!--[--><span class="vpi-sun sun" data-v-fbf9a97f></span><span class="vpi-moon moon" data-v-fbf9a97f></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-0865600b data-v-2bc8fd19 data-v-001a377f><!--[--><a class="VPSocialLink no-icon" href="https://github.com/intake24/intake24" aria-label="github" target="_blank" rel="noopener" data-v-001a377f data-v-83ae3be2><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-0865600b data-v-0c54a8e7 data-v-e9690117><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e9690117><span class="vpi-more-horizontal icon" data-v-e9690117></span></button><div class="menu" data-v-e9690117><div class="VPMenu" data-v-e9690117 data-v-e9d0de9d><!----><!--[--><!--[--><!----><div class="group" data-v-0c54a8e7><div class="item appearance" data-v-0c54a8e7><p class="label" data-v-0c54a8e7>Appearance</p><div class="appearance-action" data-v-0c54a8e7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-0c54a8e7 data-v-fbf9a97f data-v-aa5e67d3><span class="check" data-v-aa5e67d3><span class="icon" data-v-aa5e67d3><!--[--><span class="vpi-sun sun" data-v-fbf9a97f></span><span class="vpi-moon moon" data-v-fbf9a97f></span><!--]--></span></span></button></div></div></div><div class="group" data-v-0c54a8e7><div class="item social-links" data-v-0c54a8e7><div class="VPSocialLinks social-links-list" data-v-0c54a8e7 data-v-001a377f><!--[--><a class="VPSocialLink no-icon" href="https://github.com/intake24/intake24" aria-label="github" target="_blank" rel="noopener" data-v-001a377f data-v-83ae3be2><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-0865600b data-v-cf1712b4><span class="container" data-v-cf1712b4><span class="top" data-v-cf1712b4></span><span class="middle" data-v-cf1712b4></span><span class="bottom" data-v-cf1712b4></span></span></button></div></div></div></div><div class="divider" data-v-0865600b><div class="divider-line" data-v-0865600b></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-2d86940d data-v-c59a4243><div class="container" data-v-c59a4243><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-c59a4243><span class="vpi-align-left menu-icon" data-v-c59a4243></span><span class="menu-text" data-v-c59a4243>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-c59a4243 data-v-68dd055a><button data-v-68dd055a>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-2d86940d data-v-e9ed9bc3><div class="curtain" data-v-e9ed9bc3></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e9ed9bc3><span class="visually-hidden" id="sidebar-aria-label" data-v-e9ed9bc3> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-d6e4b715><section class="VPSidebarItem level-0 collapsible" data-v-d6e4b715 data-v-635eb0b6><div class="item" role="button" tabindex="0" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><h2 class="text" data-v-635eb0b6>Overview</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-635eb0b6><span class="vpi-chevron-right caret-icon" data-v-635eb0b6></span></div></div><div class="items" data-v-635eb0b6><!--[--><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/requirements" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Requirements</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/source-code" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Source code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/releases" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Releases</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/integrations" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Integrations</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link vp-external-link-icon link" href="https://intake24.github.io/researcher-docs" target="_blank" rel="noreferrer" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Researcher guides</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-d6e4b715><section class="VPSidebarItem level-0 collapsible has-active" data-v-d6e4b715 data-v-635eb0b6><div class="item" role="button" tabindex="0" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><h2 class="text" data-v-635eb0b6>Guide</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-635eb0b6><span class="vpi-chevron-right caret-icon" data-v-635eb0b6></span></div></div><div class="items" data-v-635eb0b6><!--[--><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/get-started" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Get started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/docker" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Development using Docker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/vm" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Development using VM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/database" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Database</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/testing" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Testing</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/new-prompts" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Adding a New Prompt</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/v3-survey" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Version 3 recall model</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-635eb0b6 data-v-635eb0b6><div class="item" data-v-635eb0b6><div class="indicator" data-v-635eb0b6></div><a class="VPLink link link" href="/guide/portion-size" data-v-635eb0b6><!--[--><p class="text" data-v-635eb0b6>Portion size methods</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-2d86940d data-v-4ffabf45><div class="VPDoc has-sidebar has-aside" data-v-4ffabf45 data-v-8f750f68><!--[--><!--]--><div class="container" data-v-8f750f68><div class="aside" data-v-8f750f68><div class="aside-curtain" data-v-8f750f68></div><div class="aside-container" data-v-8f750f68><div class="aside-content" data-v-8f750f68><div class="VPDocAside" data-v-8f750f68 data-v-d52297b8><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-d52297b8 data-v-ddc4ed14><div class="content" data-v-ddc4ed14><div class="outline-marker" data-v-ddc4ed14></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-ddc4ed14>On this page</div><ul class="VPDocOutlineItem root" data-v-ddc4ed14 data-v-38abe03f><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-d52297b8></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-8f750f68><div class="content-container" data-v-8f750f68><!--[--><!--]--><main class="main" data-v-8f750f68><div style="position:relative;" class="vp-doc _guide_database" data-v-8f750f68><div><h1 id="database" tabindex="-1">Database <a class="header-anchor" href="#database" aria-label="Permalink to &quot;Database&quot;">​</a></h1><p>Database engine is <a href="https://www.postgresql.org" target="_blank" rel="noreferrer">PostgreSQL</a> and API Server is using mixture of two abstractions:</p><ul><li><p><a href="https://sequelize.org" target="_blank" rel="noreferrer">Sequelize</a> ORM</p></li><li><p><a href="https://kysely.dev" target="_blank" rel="noreferrer">Kysely</a> query builder</p></li></ul><p>Intake24 system has two main databases:</p><ul><li><code>foods</code> - contains all foods related data (e.g. foods, food groups, nutrients, etc.)</li><li><code>system</code> - contains all system related data (e.g. users, permissions, roles, feedback schemes, surveys, etc.)</li></ul><h2 id="snapshots" tabindex="-1">Snapshots <a class="header-anchor" href="#snapshots" aria-label="Permalink to &quot;Snapshots&quot;">​</a></h2><p>Intake24 provides database snapshots for databases:</p><ul><li><code>foods</code> - full database snapshot (structure + data)</li><li><code>system</code> - database structure-only snapshot (no data)</li></ul><p>Database snapshots can be obtained in several ways:</p><ol><li>Run <a href="/cli/init-assets">CLI command</a> to download snapshots from public storage.</li><li>With Docker used, <code>init</code> script will create databases / download and import snapshots.</li><li>Download snapshots manually from public links below.</li></ol><h3 id="public-download-links" tabindex="-1">Public download links <a class="header-anchor" href="#public-download-links" aria-label="Permalink to &quot;Public download links&quot;">​</a></h3><!----><p>Once both databases are imported, system database needs to be initialized with default data and superuser account created using CLI <a href="/cli/init-db-system">init:db:system</a> command.</p><h2 id="images" tabindex="-1">Images <a class="header-anchor" href="#images" aria-label="Permalink to &quot;Images&quot;">​</a></h2><p>Intake24 provides food images archive.</p><p>Food images can be obtained in several ways:</p><ol><li>Run <a href="/cli/init-assets">CLI command</a> to download and extract images from public storage.</li><li>Download images archive manually from public link below.</li></ol><h3 id="public-download-links-1" tabindex="-1">Public download links <a class="header-anchor" href="#public-download-links-1" aria-label="Permalink to &quot;Public download links&quot;">​</a></h3><!----><p>Extract the downloaded archive to the desired location (e.g. <code>apps/api/storage/images</code>). See more details on configuring image assets directory in <a href="/config/api/filesystem#images-dir">Configuration -&gt; filesystem</a>.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Images are very large (more than 18GB). Make sure you have enough disk space before downloading and extracting the archive.</p></div><p>Refer to how to configure image assets directory.</p><h2 id="migrations" tabindex="-1">Migrations <a class="header-anchor" href="#migrations" aria-label="Permalink to &quot;Migrations&quot;">​</a></h2><p>Database migrations are being handled by <a href="https://sequelize.org/docs/v6/other-topics/migrations" target="_blank" rel="noreferrer">sequelize-cli</a>.</p><h3 id="migrate-system-database" tabindex="-1">Migrate system database <a class="header-anchor" href="#migrate-system-database" aria-label="Permalink to &quot;Migrate system database&quot;">​</a></h3><p>Migration commands can be being executed either from <code>project root</code> or <code>packages/db</code> directory.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:system:migrate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># shorthand for</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sequelize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:migrate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --options-path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sequelize/system/options.js</span></span></code></pre></div><h3 id="migrate-foods-database" tabindex="-1">Migrate foods database <a class="header-anchor" href="#migrate-foods-database" aria-label="Permalink to &quot;Migrate foods database&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:foods:migrate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># shorthand for</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sequelize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:migrate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --options-path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sequelize/foods/options.js</span></span></code></pre></div><h2 id="import-database-snapshots" tabindex="-1">Import database snapshots <a class="header-anchor" href="#import-database-snapshots" aria-label="Permalink to &quot;Import database snapshots&quot;">​</a></h2><p>If you have a DB snapshots of Intake24, you can use CLI to import to the database server.</p><h3 id="postgresql" tabindex="-1">PostgreSQL <a class="header-anchor" href="#postgresql" aria-label="Permalink to &quot;PostgreSQL&quot;">​</a></h3><p>PostgreSQL is running on the standard port <code>5432</code>.</p><p>The Intake24 databases are:</p><ul><li>System database: <code>intake24_system</code>, user <code>intake24</code>, no password.</li><li>Foods database: <code>intake24_foods</code>, user <code>intake24</code>, no password.</li></ul><h3 id="importing-foods-and-system-databases" tabindex="-1">Importing foods and system databases <a class="header-anchor" href="#importing-foods-and-system-databases" aria-label="Permalink to &quot;Importing foods and system databases&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Note: The scripts in this sessions aimed for setup PostgreSQL for Intake24 local development purpose only.</p></div><ol><li>Export PostgresQL username password and host name to local development environment.</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>export PGUSER=&#39;postgres&#39;</span></span>
<span class="line"><span>export PGPASSWORD=&#39;postgres&#39;</span></span>
<span class="line"><span>export PGHOST=&quot;localhost&quot;</span></span></code></pre></div><ol start="2"><li>Create a user in Postgres called <code>intake24</code> with password <code>intake24</code></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>psql -d postgres -c &quot;CREATE ROLE intake24 WITH PASSWORD &#39;intake24&#39; LOGIN;&quot;</span></span></code></pre></div><ol start="3"><li>Create DB <code>intake24_foods</code> and add extensions</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>createdb --owner=intake24 intake24_foods</span></span>
<span class="line"><span>psql -d intake24_foods -c &quot;create extension btree_gist&quot;</span></span>
<span class="line"><span>psql -d intake24_foods -c &quot;create extension \&quot;uuid-ossp\&quot;&quot;</span></span></code></pre></div><ol start="4"><li>Import snapshot file to DB <code>intake24_foods</code></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pg_restore -n public --no-owner --no-acl --role=intake24 --dbname intake24_foods ./intake24-foods-snapshot.pgcustom</span></span></code></pre></div><p>Change the path of the snapshot file as needed, e.g. <code>intake24-foods-snapshot.pgcustom</code></p><ol start="5"><li>Create DB <code>intake24_system</code></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>createdb --owner=intake24 intake24_system</span></span></code></pre></div><ol start="6"><li>Import snapshot file to DB <code>intake24_system</code>.</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pg_restore -n public --no-owner --no-acl --role=intake24 --dbname intake24_system ./intake24-system-snapshot.pgcustom</span></span></code></pre></div><p>Change the path of the snapshot file as needed, e.g. <code>intake24-system-snapshot.pgcustom</code></p><ol start="7"><li>Login to <code>intake24_system</code> using PSQL, and insert admin user (e.g. <code>admin@example.com</code>, or any email you prefer) to <code>users</code> table.</li></ol><p>Write down return user id. It will be useful in the next step.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>psql -d intake24_system</span></span>
<span class="line"><span></span></span>
<span class="line"><span>insert into users (id, &quot;name&quot;, email, phone, simple_name, email_notifications, sms_notifications, multi_factor_authentication, created_at, updated_at, verified_at, disabled_at) values (default, &#39;Admin&#39;, &#39;admin@example.com&#39;, &#39;&#39;, &#39;Admin&#39;, true, true, false, now(), now(), now(), null) returning id;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>id</span></span>
<span class="line"><span>-------</span></span>
<span class="line"><span>11969</span></span>
<span class="line"><span>(1 row)</span></span></code></pre></div><ol start="8"><li>Go to the <code>apps/cli</code> directory in the source tree and run</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pnpm run cli hash-password [your password]</span></span></code></pre></div><p>Replace <code>[your password]</code> to the password you want.</p><ol start="9"><li>Replace <code>[hash]</code> and <code>[salt]</code> with the password hash and salt generated, and insert to user by id.</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>insert into user_passwords (user_id, password_hash, password_salt, password_hasher) values (11969, &#39;[hash]&#39;, &#39;[salt]&#39;, &#39;bcrypt&#39;);</span></span></code></pre></div><ol start="10"><li>Give this user id superuser permissions:</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>insert into role_user (role_id, user_id, created_at, updated_at) values (1, 11969, now(), now());</span></span></code></pre></div><p>By that you created admin test account <code>admin@example.com</code> in development database.</p><h2 id="upgrade-guide" tabindex="-1">Upgrade guide <a class="header-anchor" href="#upgrade-guide" aria-label="Permalink to &quot;Upgrade guide&quot;">​</a></h2><p>Intake24 V3 to V4 upgrade guide (WIP)</p><h3 id="migrate-databases" tabindex="-1">Migrate databases <a class="header-anchor" href="#migrate-databases" aria-label="Permalink to &quot;Migrate databases&quot;">​</a></h3><p>Use most up-to-date V3 <code>foods</code> and <code>system</code> databases to run the migrations.</p><ol><li>Migrate system database</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:system:migrate</span></span></code></pre></div><ol start="2"><li>Migrate foods database</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:foods:migrate</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Depending on size of the databases, migration process can take from seconds to minutes. Both databases are being upgraded to use int8 instead of int4, which takes most of the time.</p><p>If you run into query timeout issues, you will have to increase the limits in sequelize config file (<code>packages/db/sequelize/{foods|system}/config.js</code>).</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Run the migration in specified order per above.</p><p>Some of the system database migrations are using foods database data (e.g. feedback data conversion into feedback-schemes) and eventually V3 old tables are dropped. Running the migrations in wrong order will fail.</p></div><h3 id="seed-databases-with-relevant-data" tabindex="-1">Seed databases with relevant data <a class="header-anchor" href="#seed-databases-with-relevant-data" aria-label="Permalink to &quot;Seed databases with relevant data&quot;">​</a></h3><p>Some of V3 data are being moved to database. To get this data into the database, run relevant seeders.</p><h4 id="standard-units" tabindex="-1">Standard units <a class="header-anchor" href="#standard-units" aria-label="Permalink to &quot;Standard units&quot;">​</a></h4><p>Standard units are being moved from V3 translation files to database. To seed the database with V3 source code standard units, run the following command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/db</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sequelize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:seed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --seed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v3-standard-units.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --options-path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sequelize/foods/options.js</span></span></code></pre></div><h4 id="recipe-foods" tabindex="-1">Recipe foods <a class="header-anchor" href="#recipe-foods" aria-label="Permalink to &quot;Recipe foods&quot;">​</a></h4><p>Recipe foods are being moved from V3 translation files to database. To seed the database with V3-like data, run the following command:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/db</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sequelize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:seed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --seed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v3-recipe-foods.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --options-path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sequelize/foods/options.js</span></span></code></pre></div><h2 id="system-database-clean-up" tabindex="-1">System database clean-up <a class="header-anchor" href="#system-database-clean-up" aria-label="Permalink to &quot;System database clean-up&quot;">​</a></h2><h3 id="truncate-all-tables-except-sequelize-meta" tabindex="-1">Truncate all tables except <code>sequelize_meta</code> <a class="header-anchor" href="#truncate-all-tables-except-sequelize-meta" aria-label="Permalink to &quot;Truncate all tables except `sequelize_meta`&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TRUNCATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `table`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> RESTART</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IDENTITY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CASCADE;</span></span></code></pre></div><h3 id="re-initialize-data" tabindex="-1">Re-initialize data <a class="header-anchor" href="#re-initialize-data" aria-label="Permalink to &quot;Re-initialize data&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init:db:system</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-8f750f68 data-v-75804ee1><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-75804ee1><span class="visually-hidden" id="doc-footer-aria-label" data-v-75804ee1>Pager</span><div class="pager" data-v-75804ee1><a class="VPLink link pager-link prev" href="/guide/vm" data-v-75804ee1><!--[--><span class="desc" data-v-75804ee1>Previous page</span><span class="title" data-v-75804ee1>Development using VM</span><!--]--></a></div><div class="pager" data-v-75804ee1><a class="VPLink link pager-link next" href="/guide/testing" data-v-75804ee1><!--[--><span class="desc" data-v-75804ee1>Next page</span><span class="title" data-v-75804ee1>Testing</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"admin_acl_index.md\":\"x7nSRpSs\",\"admin_acl_permissions.md\":\"Bc3wreFb\",\"admin_acl_resources.md\":\"CmWXWmas\",\"admin_acl_roles.md\":\"UFInwP_m\",\"admin_acl_securables.md\":\"CKfCiT_j\",\"admin_acl_users.md\":\"PjGMQzf6\",\"admin_feedback_schemes.md\":\"C3FZxA2U\",\"admin_foods_fdbs.md\":\"I4coofVJ\",\"admin_foods_nutrient-tables.md\":\"D0O-Kgha\",\"admin_foods_nutrient-types.md\":\"CB_Y1gb7\",\"admin_foods_nutrient-units.md\":\"fHP4i9Qn\",\"admin_foods_standard-units.md\":\"et1eLDkh\",\"admin_images_as-served-sets.md\":\"D4519l5O\",\"admin_images_drinkware-sets.md\":\"DrXZbMXR\",\"admin_images_guide-images.md\":\"b9TAZGfo\",\"admin_images_image-maps.md\":\"C1aR-cJb\",\"admin_images_index.md\":\"BJESNUm1\",\"admin_images_media.md\":\"D_kIgM3_\",\"admin_index.md\":\"lwxlZHqK\",\"admin_localization_languages.md\":\"CfeffJ9q\",\"admin_localization_locales.md\":\"mnjhOrzT\",\"admin_nutritionist-dictionary.md\":\"CVqn3mD2\",\"admin_surveys_faqs.md\":\"CfLvqKyg\",\"admin_surveys_index.md\":\"DZALZezP\",\"admin_surveys_prompt-editor.md\":\"aLsyQ0gy\",\"admin_surveys_prompt-templates.md\":\"C0YlyhFU\",\"admin_surveys_prompt-types.md\":\"xkHXU0fb\",\"admin_surveys_schemes.md\":\"DUfLKZIy\",\"admin_system_job-types.md\":\"KqQSUsqQ\",\"admin_system_jobs.md\":\"BTx9ffVd\",\"admin_system_sign-in-logs.md\":\"CmIqQ6vA\",\"admin_system_tasks.md\":\"DE8T_952\",\"admin_user_jobs.md\":\"g-bv-ghf\",\"admin_user_personal-access-tokens.md\":\"D7HUil_T\",\"admin_user_profile.md\":\"aS68_a07\",\"api_admin_fdbs.md\":\"B4OnWqSX\",\"api_admin_foods.md\":\"Ad3poZ_C\",\"api_admin_images_as-served-images.md\":\"BViNu0j9\",\"api_admin_images_as-served-sets.md\":\"DK-UNspq\",\"api_admin_images_drinkware-sets.md\":\"DutmJVwR\",\"api_admin_images_guide-images.md\":\"Bsjep-HY\",\"api_admin_images_image-maps.md\":\"C8Alv7IQ\",\"api_authentication.md\":\"B0HfXW01\",\"api_index.md\":\"Cx1FiaVQ\",\"api_rate-limits.md\":\"DHtiGyuD\",\"cli_find-portion-images.md\":\"8Dgv9ria\",\"cli_generate-key.md\":\"BGIp7ken\",\"cli_generate-vapid-keys.md\":\"DM-tV0bL\",\"cli_import-package.md\":\"vWGyDS1c\",\"cli_index.md\":\"b9awKkn9\",\"cli_init-assets.md\":\"C1j5yDFV\",\"cli_init-db-system.md\":\"CUQKDh9e\",\"cli_init-env.md\":\"Bv1GUdAI\",\"config_admin_index.md\":\"BiUc9U8e\",\"config_api_acl.md\":\"DYPr2483\",\"config_api_application.md\":\"DE8T66DT\",\"config_api_cache.md\":\"UGahVROr\",\"config_api_database.md\":\"RipQOThg\",\"config_api_filesystem.md\":\"XYdp4msk\",\"config_api_images.md\":\"B5j-tMja\",\"config_api_index.md\":\"N0o9wugJ\",\"config_api_log.md\":\"C3X6ye3H\",\"config_api_mail.md\":\"CI-3dZx0\",\"config_api_media.md\":\"BPlPFKLP\",\"config_api_pdf.md\":\"BZ_h-DMa\",\"config_api_pub-sub.md\":\"CxvifMAU\",\"config_api_queue.md\":\"BMeW3kT-\",\"config_api_rate-limiter.md\":\"BBzGCAvT\",\"config_api_security.md\":\"sysFZvA4\",\"config_api_services.md\":\"DTG-2oX_\",\"config_api_session.md\":\"Okv6uQ6m\",\"config_index.md\":\"Be2VEMHg\",\"config_survey_index.md\":\"B5s_AezF\",\"guide_database.md\":\"CCozPLNc\",\"guide_docker.md\":\"DmL039_i\",\"guide_get-started.md\":\"D-6qVUCR\",\"guide_index.md\":\"KaW6VFut\",\"guide_integrations.md\":\"B1hB3myz\",\"guide_new-prompts.md\":\"Cs1FOBQR\",\"guide_portion-size.md\":\"Ysqt2aLB\",\"guide_releases.md\":\"yhC_Gyq0\",\"guide_requirements.md\":\"YxLt3E19\",\"guide_source-code.md\":\"1BgmmfIL\",\"guide_testing.md\":\"DsN09tEU\",\"guide_v3-survey.md\":\"Buw3wY-L\",\"guide_vm.md\":\"CGHgeg2i\",\"index.md\":\"CZ498aYT\",\"portal_index.md\":\"BMFdBxMI\",\"survey_index.md\":\"DeRRbWw8\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en\",\"dir\":\"ltr\",\"title\":\"Intake24\",\"description\":\"Intake24 documentation\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/icons/pwa-512x512.png\",\"nav\":[{\"text\":\"Guide\",\"link\":\"/guide/\"},{\"text\":\"Components\",\"items\":[{\"text\":\"Configuration\",\"link\":\"/config/\"},{\"text\":\"API\",\"link\":\"/api/\"},{\"text\":\"Admin Tool\",\"link\":\"/admin/\"},{\"text\":\"Survey App\",\"link\":\"/survey/\"},{\"text\":\"CLI\",\"link\":\"/cli/\"}]},{\"text\":\"Resources\",\"items\":[{\"text\":\"Home\",\"link\":\"https://intake24.org\"},{\"text\":\"Researcher guides\",\"link\":\"https://intake24.atlassian.net/wiki/spaces/resources\"},{\"text\":\"GitHub\",\"link\":\"https://github.com/intake24/intake24\"}]}],\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"JUDZMF6GV1\",\"apiKey\":\"b0cf60473c8b77d46acd0862161c7a15\",\"indexName\":\"intake24\"}},\"sidebar\":{\"/guide/\":[{\"text\":\"Overview\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/guide/\"},{\"text\":\"Requirements\",\"link\":\"/guide/requirements\"},{\"text\":\"Source code\",\"link\":\"/guide/source-code\"},{\"text\":\"Releases\",\"link\":\"/guide/releases\"},{\"text\":\"Integrations\",\"link\":\"/guide/integrations\"},{\"text\":\"Researcher guides\",\"link\":\"https://intake24.github.io/researcher-docs\",\"target\":\"_blank\"}]},{\"text\":\"Guide\",\"collapsed\":false,\"items\":[{\"text\":\"Get started\",\"link\":\"/guide/get-started\"},{\"text\":\"Development using Docker\",\"link\":\"/guide/docker\"},{\"text\":\"Development using VM\",\"link\":\"/guide/vm\"},{\"text\":\"Database\",\"link\":\"/guide/database\"},{\"text\":\"Testing\",\"link\":\"/guide/testing\"},{\"text\":\"Adding a New Prompt\",\"link\":\"/guide/new-prompts\"},{\"text\":\"Version 3 recall model\",\"link\":\"/guide/v3-survey\"},{\"text\":\"Portion size methods\",\"link\":\"/guide/portion-size\"}]}],\"/config/\":[{\"text\":\"Configuration\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/config/\"}]},{\"text\":\"API server\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/config/api/\"},{\"text\":\"Application\",\"link\":\"/config/api/application\"},{\"text\":\"ACL\",\"link\":\"/config/api/acl\"},{\"text\":\"Cache\",\"link\":\"/config/api/cache\"},{\"text\":\"Database\",\"link\":\"/config/api/database\"},{\"text\":\"Filesystem\",\"link\":\"/config/api/filesystem\"},{\"text\":\"Image processing\",\"link\":\"/config/api/images\"},{\"text\":\"Logging\",\"link\":\"/config/api/log\"},{\"text\":\"Mail\",\"link\":\"/config/api/mail\"},{\"text\":\"PDF generation\",\"link\":\"/config/api/pdf\"},{\"text\":\"Pub-sub\",\"link\":\"/config/api/pub-sub\"},{\"text\":\"Queue\",\"link\":\"/config/api/queue\"},{\"text\":\"Rate limiter\",\"link\":\"/config/api/rate-limiter\"},{\"text\":\"Security\",\"link\":\"/config/api/security\"},{\"text\":\"Services\",\"link\":\"/config/api/services\"},{\"text\":\"Session\",\"link\":\"/config/api/session\"}]},{\"text\":\"Admin client\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/config/admin/\"}]},{\"text\":\"Survey client\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/config/survey/\"}]}],\"/api/\":[{\"text\":\"API\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/api/\"},{\"text\":\"OpenAPI Reference\",\"link\":\"/open-api.html\",\"target\":\"_blank\"},{\"text\":\"Authentication\",\"link\":\"/api/authentication\"},{\"text\":\"Rate and usage limits\",\"link\":\"/api/rate-limits\"}]}],\"/admin/\":[{\"text\":\"Admin\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/admin/\"},{\"text\":\"Profile\",\"link\":\"/admin/user/profile\"},{\"text\":\"Personal access tokens\",\"link\":\"/admin/user/personal-access-tokens\"},{\"text\":\"Jobs\",\"link\":\"/admin/user/jobs\"}]},{\"text\":\"Foods\",\"items\":[{\"text\":\"Food databases\",\"link\":\"/admin/foods/fdbs\"},{\"text\":\"Nutrient tables\",\"link\":\"/admin/foods/nutrient-tables\"},{\"text\":\"Nutrient types\",\"link\":\"/admin/foods/nutrient-types\"},{\"text\":\"Nutrient units\",\"link\":\"/admin/foods/nutrient-units\"},{\"text\":\"Standard units\",\"link\":\"/admin/foods/standard-units\"}]},{\"text\":\"Localization\",\"items\":[{\"text\":\"Languages\",\"link\":\"/admin/localization/languages\"},{\"text\":\"Locales\",\"link\":\"/admin/localization/locales\"}]},{\"text\":\"Images\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/admin/images/\"},{\"text\":\"As served sets\",\"link\":\"/admin/images/as-served-sets\"},{\"text\":\"Image maps\",\"link\":\"/admin/images/image-maps\"},{\"text\":\"Guide images\",\"link\":\"/admin/images/guide-images\"},{\"text\":\"Drinkware sets\",\"link\":\"/admin/images/drinkware-sets\"},{\"text\":\"Media\",\"link\":\"/admin/media\"}]},{\"text\":\"Feedback\",\"items\":[{\"text\":\"Schemes\",\"link\":\"/admin/feedback/schemes\"}]},{\"text\":\"Surveys MGMT\",\"items\":[{\"text\":\"Surveys\",\"link\":\"/admin/surveys/\"},{\"text\":\"Schemes\",\"link\":\"/admin/surveys/schemes\"},{\"text\":\"Prompt editor\",\"link\":\"/admin/surveys/prompt-editor\"},{\"text\":\"Prompt types\",\"link\":\"/admin/surveys/prompt-types\"},{\"text\":\"Prompt templates\",\"link\":\"/admin/surveys/prompt-templates\"},{\"text\":\"FAQs\",\"link\":\"/admin/surveys/faqs\"}]},{\"text\":\"Access control list\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/admin/acl/\"},{\"text\":\"Resources\",\"link\":\"/admin/acl/resources\"},{\"text\":\"Securables\",\"link\":\"/admin/acl/securables\"},{\"text\":\"Permissions\",\"link\":\"/admin/acl/permissions\"},{\"text\":\"Roles\",\"link\":\"/admin/acl/roles\"},{\"text\":\"Users\",\"link\":\"/admin/acl/users\"}]},{\"text\":\"System\",\"items\":[{\"text\":\"Job types\",\"link\":\"/admin/system/job-types\"},{\"text\":\"Jobs\",\"link\":\"/admin/system/jobs\"},{\"text\":\"Sign-in logs\",\"link\":\"/admin/system/sign-in-logs\"},{\"text\":\"Tasks\",\"link\":\"/admin/system/tasks\"}]}],\"/survey/\":[{\"text\":\"Survey\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/survey/\"}]}],\"/cli/\":[{\"text\":\"CLI\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/cli/\"},{\"text\":\"Initialize .env files\",\"link\":\"/cli/init-env\"},{\"text\":\"Initialize system database\",\"link\":\"/cli/init-db-system\"},{\"text\":\"Download assets\",\"link\":\"/cli/init-assets\"},{\"text\":\"Generate key / secret\",\"link\":\"/cli/generate-key\"},{\"text\":\"Generate VAPID keys\",\"link\":\"/cli/generate-vapid-keys\"},{\"text\":\"Find portion images\",\"link\":\"/cli/find-portion-images\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/intake24/intake24\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>